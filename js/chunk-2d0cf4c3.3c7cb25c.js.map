{"version":3,"sources":["webpack:///./src/views/front/Cart.vue","webpack:///./src/components/DeleteModal.vue","webpack:///./src/components/DeleteModal.vue?cdd3","webpack:///./src/views/front/Cart.vue?dce9"],"names":["class","role","width","scope","getProductLoading","cartData","final_total","type","deleteProduct","item","carts","key","id","icon","product","title","price","changeQty","qty","unit","$router","push","to","ref","getCartData","tabindex","aria-labelledby","aria-hidden","closeModal","deleteStatus","deleteCart","deleteOne","deleteAll","data","deleteModal","methods","openModal","this","show","hide","url","$http","delete","then","res","success","$emit","catch","err","console","dir","mounted","$refs","backdrop","keyboard","render","getCartLoading","get","status","cart","tempQty","obj","product_id","put","components","created"],"mappings":"kJACOA,MAAM,W,EACT,eAEM,OAFDA,MAAM,0BAA0BC,KAAK,U,CACxC,eAA+C,QAAzCD,MAAM,mBAAkB,gB,YAG7BA,MAAM,sB,EACT,eAAkC,MAA9BA,MAAM,eAAc,SAAK,G,GACxBA,MAAM,mC,GAIJA,MAAM,+C,EACX,eAQQ,cAPN,eAMK,WALH,eAAkC,MAA9BE,MAAM,KAAKC,MAAM,OAAM,MAC3B,eAAwD,MAApDD,MAAM,MAAMC,MAAM,MAAMH,MAAM,gBAAe,MACjD,eAAmC,MAA/BE,MAAM,MAAMC,MAAM,OAAM,MAC5B,eAAsC,MAAlCD,MAAM,MAAMC,MAAM,OAAM,SAC5B,eAAmC,MAA/BD,MAAM,MAAMC,MAAM,OAAM,U,MAQxBH,MAAM,gB,GAGHA,MAAM,kB,GAIHA,MAAM,c,EAYhB,eAAS,mB,EACT,eAAS,mB,EACT,eAAS,mB,EACT,eAA8B,MAA1BA,MAAM,aAAY,OAAG,G,GACrBA,MAAM,a,GAIXA,MAAM,iC,SAKRA,MAAM,e,EACT,eAAkC,MAA9BA,MAAM,eAAc,SAAK,G,GACxBA,MAAM,sB,EACT,eAAiB,UAAb,YAAQ,G,iBACwC,U,6LA9D7B,EAAAI,mB,iBAA3B,eAIM,MAJN,EAIM,CAHJ,K,sBAIwD,IAApB,EAAAC,SAASC,a,iBAA/C,eAoDM,MApDN,EAoDM,CAnDJ,EACA,eAGM,MAHN,EAGM,CAFJ,eACwD,UADhDC,KAAK,SAASP,MAAM,yBAC3B,QAAK,+BAAE,EAAAQ,cAAa,YAAc,EAAAC,SAAO,WAE5C,eAyCQ,QAzCR,EAyCQ,CAxCN,EASA,eAqBQ,e,mBApBN,eAmBK,2BAnBc,EAAAJ,SAASK,OAAK,SAAtBD,G,wBAAX,eAmBK,MAnB+BE,IAAKF,EAAKG,I,CAC5C,eAEK,WAFD,eAC+D,UADvDL,KAAK,SAASP,MAAM,gBAAiB,QAAK,mBAAE,EAAAQ,cAAa,YAAcC,K,CACjF,eAAwD,GAArCI,KAAK,e,iBAE1B,eAAoD,KAApD,EAAoD,eAAzBJ,EAAKK,QAAQC,OAAK,GAC7C,eAA+B,yBAAzBN,EAAKK,QAAQE,OAAK,GACxB,eAWK,WAVH,eASM,MATN,EASM,CARJ,eAES,UAFDT,KAAK,SAAU,QAAK,mBAAE,EAAAU,UAAS,SAAWR,EAAMA,EAAKS,O,CAC3D,eAA2E,GAAxDL,KAAK,aAAab,MAAM,e,eAE7C,eAA4C,OAA5C,EAA4C,eAAjBS,EAAKS,KAAG,GACnC,eAES,UAFDX,KAAK,SAAU,QAAK,mBAAE,EAAAU,UAAS,MAAQR,EAAMA,EAAKS,O,CACxD,eAA4E,GAAzDL,KAAK,cAAcb,MAAM,e,8BACrC,IACT,eAAES,EAAKK,QAAQK,MAAI,OAGvB,eAA6B,yBAAvBV,EAAKH,aAAW,Q,QAG1B,eAQQ,cAPN,eAMK,WALH,EACA,EACA,EACA,EACA,eAAmD,KAAnD,EAAmD,eAA3B,EAAAD,SAASC,aAAW,SAIlD,eAGM,MAHN,EAGM,CAFJ,eACuD,UAD/CC,KAAK,SAASP,MAAM,+BAC3B,QAAK,iCAAOoB,QAAQC,KAAI,oBAAmB,Y,iBAGhD,eAMM,MANN,EAMM,CALJ,EACA,eAGM,MAHN,EAGM,CAFJ,EACA,eAAwE,GAA3DC,GAAG,YAAYtB,MAAM,mB,yBAAkB,iBAAM,C,iBAG9D,eAAwE,GAA3DuB,IAAI,cAAe,cAAa,EAAAC,a,gDCjExCxB,MAAM,aAAauB,IAAI,cAAcE,SAAS,KACnDC,kBAAgB,oBAAoBC,cAAY,Q,GAC3C3B,MAAM,gB,GACJA,MAAM,iB,GACJA,MAAM,wB,EACT,eAA4C,MAAxCA,MAAM,0BAAyB,QAAI,G,GAGpCA,MAAM,c,uBAINA,MAAM,gB,gDAZf,eAoBI,MApBJ,EAoBI,CAlBJ,eAiBM,MAjBN,EAiBM,CAhBJ,eAeM,MAfN,EAeM,CAdJ,eAGM,MAHN,EAGM,CAFJ,EACA,eAAqF,UAA7EO,KAAK,SAASP,MAAM,4BAA6B,QAAK,8BAAE,EAAA4B,YAAA,EAAAA,WAAA,yBAElE,eAGM,MAHN,EAGM,CAFiB,cAAZ,EAAAC,c,iBAAT,eAAiF,MAA1C,YAAS,eAAE,EAAAC,WAAWhB,QAAQC,OAAO,IAAC,K,iBAC7E,eAAuB,MAAb,gBAEZ,eAKM,MALN,EAKM,CAJJ,eAA+E,UAAvER,KAAK,SAASP,MAAM,oBAAqB,QAAK,8BAAE,EAAA4B,YAAA,EAAAA,WAAA,sBAAY,MAElD,cAAZ,EAAAC,c,iBADN,eACkE,U,MAD1DtB,KAAK,SAASP,MAAM,iBACS,QAAK,8BAAE,EAAA+B,WAAA,EAAAA,UAAA,sBAAW,Q,iBACvD,eAAqF,U,MAA7ExB,KAAK,SAASP,MAAM,iBAAyB,QAAK,8BAAE,EAAAgC,WAAA,EAAAA,UAAA,sBAAW,iB,0CAWhE,GACbC,KADa,WAEX,MAAO,CACLC,YAAa,GACbL,aAAc,GACdC,WAAY,KAGhBK,QAAS,CACPC,UADO,WAELC,KAAKH,YAAYI,QAEnBV,WAJO,WAKLS,KAAKR,aAAe,GACpBQ,KAAKP,WAAa,GAClBO,KAAKH,YAAYK,QAEnBR,UATO,WASK,WACJS,EAAE,UAAO,wCAAP,eAAqC,UAArC,iBAAsEH,KAAKP,WAAWlB,IAC9FyB,KAAKI,MAAMC,OAAOF,GACfG,MAAK,SAACC,GACDA,EAAIX,KAAKY,SACX,IAAK,WAAD,OAAY,EAAKf,WAAWhB,QAAQC,MAApC,MACJ,EAAK+B,MAAM,eACX,EAAKlB,eAEL,IAAK,YACL,EAAKA,iBAGRmB,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAGlBhB,UA1BO,WA0BK,WACJQ,EAAE,UAAO,wCAAP,eAAqC,UAArC,UACRH,KAAKI,MAAMC,OAAOF,GACfG,MAAK,SAACC,GACDA,EAAIX,KAAKY,SACX,IAAK,YACL,EAAKC,MAAM,eACX,EAAKlB,cAEL,IAAK,eAGRmB,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAIpBG,QAnDa,WAoDXd,KAAKH,YAAc,IAAI,OAAMG,KAAKe,MAAMlB,YAAa,CAAEmB,SAAU,SAAUC,UAAU,MC7EzF,EAAOC,OAAS,EAED,QFoEA,GACbtB,KADa,WAEX,MAAO,CACL5B,SAAU,GACV6B,YAAa,GACbsB,gBAAgB,IAGpBrB,QAAS,CACPX,YADO,WACO,WACZa,KAAKjC,mBAAoB,EACzB,IAAMoC,EAAE,UAAO,wCAAP,eAAqC,UAArC,SACRH,KAAKI,MAAMgB,IAAIjB,GACZG,MAAK,SAACC,GACDA,EAAIX,KAAKY,UACX,EAAKxC,SAAWuC,EAAIX,KAAKA,KACzB,EAAK7B,mBAAoB,MAG5B2C,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAGlB/B,UAfO,SAeGyC,EAAQC,EAAMzC,GAAK,WACvB0C,EAAU1C,EACd,GAAe,WAAXwC,EAAqB,CACvB,GAAY,IAARxC,EAEF,YADAmB,KAAK7B,cAAc,YAAamD,GAGlCC,GAAW,OAEXA,GAAW,EAEb,IAAMC,EAAM,CACV5B,KAAM,CACJ6B,WAAYH,EAAKG,WACjB5C,IAAK0C,IAGHpB,EAAE,UAAO,wCAAP,eAAqC,UAArC,iBAAsEmB,EAAK/C,IACnFyB,KAAKI,MAAMsB,IAAIvB,EAAKqB,GACjBlB,MAAK,SAACC,GACDA,EAAIX,KAAKY,SACX,IAAK,GAAD,OAAIc,EAAK7C,QAAQC,MAAjB,kBAAgC6C,IACpC,EAAKpC,eAEL,IAAK,GAAD,OAAImC,EAAK7C,QAAQC,MAAjB,iBAGPgC,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAGlBxC,cA9CO,SA8COkD,EAAQC,GACpBtB,KAAKe,MAAMlB,YAAYJ,WAAa6B,EACpCtB,KAAKe,MAAMlB,YAAYL,aAAe6B,EACtCrB,KAAKe,MAAMlB,YAAYE,cAG3B4B,WAAY,CACV9B,YAAA,GAEF+B,QA/Da,WAgEX5B,KAAKb,gBGtIT,EAAO+B,OAASA,EAED","file":"js/chunk-2d0cf4c3.3c7cb25c.js","sourcesContent":["<template>\n  <div class=\"loading\" v-if=\"getProductLoading\">\n    <div class=\"loadIcon spinner-border\" role=\"status\">\n      <span class=\"visually-hidden\">Loading...</span>\n    </div>\n  </div>\n  <div class=\"cartList mb-5 mt-4\" v-if=\"cartData.final_total!==0\">\n    <h2 class=\"text-center\">購物車列表</h2>\n    <div class=\"d-flex justify-content-end mb-2\">\n      <button type=\"button\" class=\"btn btn-outline-danger\"\n      @click=\"deleteProduct('deleteAll', item)\">清空購物車</button>\n    </div>\n    <table class=\"productList table table-striped table-hover\">\n      <thead>\n        <tr>\n          <th width=\"5%\" scope=\"col\">刪除</th>\n          <th width=\"45%\" scope=\"col\" class=\"productTitle\">品名</th>\n          <th width=\"15%\" scope=\"col\">單價</th>\n          <th width=\"20%\" scope=\"col\">數量/單位</th>\n          <th width=\"15%\" scope=\"col\">總價</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\n          <td><button type=\"button\" class=\"deleteCartOne\" @click=\"deleteProduct('deleteOne', item)\">\n            <font-awesome-icon icon=\"trash-alt\"></font-awesome-icon></button>\n          </td>\n          <td class=\"productTitle\">{{item.product.title}}</td>\n          <td>{{item.product.price}}</td>\n          <td>\n            <div class=\"qtyArea d-flex\">\n              <button type=\"button\" @click=\"changeQty('reduce', item, item.qty)\">\n                <font-awesome-icon icon=\"caret-left\" class=\"icon fs-5\"></font-awesome-icon>\n              </button>\n              <span class=\"productQty\">{{item.qty}}</span>\n              <button type=\"button\" @click=\"changeQty('add', item, item.qty)\">\n                <font-awesome-icon icon=\"caret-right\" class=\"icon fs-5\"></font-awesome-icon>\n              </button>\n              {{item.product.unit}}\n            </div>\n          </td>\n          <td>{{item.final_total}}</td>\n        </tr>\n      </tbody>\n      <tfoot>\n        <tr>\n          <td></td>\n          <td></td>\n          <td></td>\n          <td class=\"totalText\">總金額</td>\n          <td class=\"totalText\">{{cartData.final_total}}</td>\n        </tr>\n      </tfoot>\n    </table>\n    <div class=\"d-flex justify-content-center\">\n      <button type=\"button\" class=\"btn btn-primary px-4 fw-bold\"\n      @click=\"this.$router.push('/customerForm')\">結帳</button>\n    </div>\n  </div>\n  <div class=\"noCart py-4\" v-else>\n    <h2 class=\"text-center\">購物車列表</h2>\n    <div class=\"noCartContent py-4\">\n      <h3>購物車內沒有商品</h3>\n      <router-link to=\"/products\" class=\"btn btn-primary\">回到產品列表</router-link>\n    </div>\n  </div>\n  <deleteModal ref=\"deleteModal\" @getCartData=\"getCartData\"></deleteModal>\n</template>\n\n<script>\nimport deleteModal from '@/components/DeleteModal.vue';\nimport swal from 'sweetalert';\n\nexport default {\n  data() {\n    return {\n      cartData: {},\n      deleteModal: {},\n      getCartLoading: true,\n    };\n  },\n  methods: {\n    getCartData() {\n      this.getProductLoading = true;\n      const url = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.cartData = res.data.data;\n            this.getProductLoading = false;\n          }\n        })\n        .catch((err) => {\n          console.dir(err);\n        });\n    },\n    changeQty(status, cart, qty) {\n      let tempQty = qty;\n      if (status === 'reduce') {\n        if (qty === 1) {\n          this.deleteProduct('deleteOne', cart);\n          return;\n        }\n        tempQty -= 1;\n      } else {\n        tempQty += 1;\n      }\n      const obj = {\n        data: {\n          product_id: cart.product_id,\n          qty: tempQty,\n        },\n      };\n      const url = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${cart.id}`;\n      this.$http.put(url, obj)\n        .then((res) => {\n          if (res.data.success) {\n            swal(`${cart.product.title}購買數量更改為${tempQty}`);\n            this.getCartData();\n          } else {\n            swal(`${cart.product.title}購買數量更改失敗！`);\n          }\n        })\n        .catch((err) => {\n          console.dir(err);\n        });\n    },\n    deleteProduct(status, cart) {\n      this.$refs.deleteModal.deleteCart = cart;\n      this.$refs.deleteModal.deleteStatus = status;\n      this.$refs.deleteModal.openModal();\n    },\n  },\n  components: {\n    deleteModal,\n  },\n  created() {\n    this.getCartData();\n  },\n};\n</script>\n","<template>\n  <div class=\"modal fade\" ref=\"deleteModal\" tabindex=\"-1\"\n  aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header bg-dark\">\n        <h5 class=\"modal-title text-white\">刪除確認</h5>\n        <button type=\"button\" class=\"btn-close btn-close-white\" @click=\"closeModal\"></button>\n      </div>\n      <div class=\"modal-body\">\n        <p v-if=\"deleteStatus === 'deleteOne'\">確定要刪除購物車中{{deleteCart.product.title}}？</p>\n        <p v-else>確定要清空購物車？</p>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">取消</button>\n        <button type=\"button\" class=\"btn btn-danger\"\n        v-if=\"deleteStatus === 'deleteOne'\" @click=\"deleteOne\">刪除</button>\n        <button type=\"button\" class=\"btn btn-danger\" v-else @click=\"deleteAll\">清空購物車</button>\n      </div>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport swal from 'sweetalert';\nimport { Modal } from 'bootstrap';\n\nexport default {\n  data() {\n    return {\n      deleteModal: {},\n      deleteStatus: '',\n      deleteCart: [],\n    };\n  },\n  methods: {\n    openModal() {\n      this.deleteModal.show();\n    },\n    closeModal() {\n      this.deleteStatus = '';\n      this.deleteCart = [];\n      this.deleteModal.hide();\n    },\n    deleteOne() {\n      const url = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart/${this.deleteCart.id}`;\n      this.$http.delete(url)\n        .then((res) => {\n          if (res.data.success) {\n            swal(`成功刪除購物車中${this.deleteCart.product.title}！`);\n            this.$emit('getCartData');\n            this.closeModal();\n          } else {\n            swal('購物車刪除失敗！');\n            this.closeModal();\n          }\n        })\n        .catch((err) => {\n          console.dir(err);\n        });\n    },\n    deleteAll() {\n      const url = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/carts`;\n      this.$http.delete(url)\n        .then((res) => {\n          if (res.data.success) {\n            swal('清空購物車成功！');\n            this.$emit('getCartData');\n            this.closeModal();\n          } else {\n            swal('清空購物車失敗！');\n          }\n        })\n        .catch((err) => {\n          console.dir(err);\n        });\n    },\n  },\n  mounted() {\n    this.deleteModal = new Modal(this.$refs.deleteModal, { backdrop: 'static', keyboard: false });\n  },\n};\n</script>\n","import { render } from \"./DeleteModal.vue?vue&type=template&id=213d1c40\"\nimport script from \"./DeleteModal.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./Cart.vue?vue&type=template&id=3ea9709e\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}