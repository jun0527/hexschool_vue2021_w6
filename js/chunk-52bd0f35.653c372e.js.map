{"version":3,"sources":["webpack:///./src/views/front/CustomerForm.vue","webpack:///./src/components/SubmitModal.vue","webpack:///./src/components/SubmitModal.vue?1805","webpack:///./src/views/front/CustomerForm.vue?e5f4","webpack:///./node_modules/core-js/modules/es.function.name.js"],"names":["class","for","type","submitData","errors","name","id","rules","user","email","isPhone","tel","address","as","message","ref","tabindex","aria-labelledby","aria-hidden","role","closeModal","cartData","carts","item","key","product","title","qty","final_total","submitOrder","submitLoading","data","submitModal","props","methods","openModal","this","show","hide","getCartData","url","$http","get","then","res","success","catch","err","console","dir","obj","post","$router","push","mounted","$refs","backdrop","keyboard","render","components","value","phoneNumber","test","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","match","error"],"mappings":"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","file":"js/chunk-52bd0f35.653c372e.js","sourcesContent":["<template>\n  <div class=\"py-4\">\n    <h2 class=\"text-center\">填寫購買人資料</h2>\n    <Form class=\"containerForm py-2\" v-slot=\"{errors}\" @submit=\"submitData\">\n      <div class=\"formGroup mb-3\">\n        <label for=\"email\" class=\"form-label\">email</label>\n        <Field type=\"email\" name=\"email\" id=\"email\"\n        class=\"form-control\" :class=\"{'is-invalid':errors['email']}\"\n          rules=\"required|email\" v-model.trim=\"user.email\"></Field>\n        <Error-Message name=\"email\" class=\"invalid-feedback\"></Error-Message>\n      </div>\n      <div class=\"formGroup mb-3\">\n        <label for=\"name\" class=\"form-label\">收件人姓名</label>\n        <Field type=\"text\" name=\"收件人姓名\" id=\"name\"\n        class=\"form-control\" :class=\"{'is-invalid':errors['收件人姓名']}\"\n          rules=\"required\" v-model.trim=\"user.name\"></Field>\n        <Error-Message name=\"收件人姓名\" class=\"invalid-feedback\"></Error-Message>\n      </div>\n      <div class=\"formGroup mb-3\">\n        <label for=\"tel\" class=\"form-label\">收件人手機號碼</label>\n        <Field type=\"tel\" name=\"收件人手機號碼\" id=\"tel\"\n        class=\"form-control\" :class=\"{'is-invalid':errors['收件人手機號碼']}\"\n          :rules=\"isPhone\" v-model.trim=\"user.tel\"></Field>\n        <Error-Message name=\"收件人手機號碼\" class=\"invalid-feedback\"></Error-Message>\n      </div>\n      <div class=\"formGroup mb-3\">\n        <label for=\"address\" class=\"form-label\">收件人地址</label>\n        <Field type=\"text\" name=\"收件人地址\" id=\"address\"\n        class=\"form-control\" :class=\"{'is-invalid':errors['收件人地址']}\"\n          rules=\"required\" v-model.trim=\"user.address\"></Field>\n        <Error-Message name=\"收件人地址\" class=\"invalid-feedback\"></Error-Message>\n      </div>\n      <div class=\"formGroup mb-3\">\n        <label for=\"message\" class=\"form-label\">備註</label>\n        <Field type=\"text\" name=\"備註\" id=\"message\"\n        class=\"form-control\" as=\"textarea\" v-model.trim=\"message\"></Field>\n      </div>\n      <div class=\"fromGroup d-flex justify-content-center\">\n        <button type=\"submit\" class=\"btn btn-primary\">送出資料</button>\n      </div>\n    </Form>\n  </div>\n  <submitModal ref=\"submitModal\" :user=\"user\" :message=\"message\"></submitModal>\n</template>\n\n<script>\nimport submitModal from '@/components/SubmitModal.vue';\n\nexport default {\n  data() {\n    return {\n      user: {\n        name: '',\n        email: '',\n        tel: '',\n        address: '',\n      },\n      message: '',\n    };\n  },\n  components: {\n    submitModal,\n  },\n  methods: {\n    isPhone(value) {\n      if (!value) {\n        return '收件人手機號碼 為必填';\n      }\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : '收件人手機號碼 須為正確的手機號碼';\n    },\n    submitData() {\n      this.$refs.submitModal.openModal();\n    },\n  },\n};\n</script>\n","<template>\n  <div class=\"modal fade\" ref=\"submitModal\" tabindex=\"-1\"\n  aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-dialog-scrollable\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-dark\">\n          <h5 class=\"modal-title text-white\" id=\"exampleModalLabel\">訂單確認</h5>\n          <button type=\"button\" class=\"btn-close btn-close-white\" @click=\"closeModal\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <p>收件人姓名：{{user.name}}</p>\n          <p>收件人email：{{user.email}}</p>\n          <p>收件人電話：{{user.tel}}</p>\n          <p>收件人地址：{{user.address}}</p>\n          <p>留言：{{message}}</p>\n          <p>訂單內容：</p>\n          <div class=\"orderContent\">\n            <p v-for=\"item in cartData.carts\"\n            :key=\"item.id\">{{item.product.title}} x {{item.qty}}</p>\n            <p class=\"total\">總金額：{{cartData.final_total}}</p>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" @click=\"closeModal\">取消</button>\n          <button type=\"button\" class=\"btn btn-primary\"\n          @click=\"submitOrder\"><span class=\"spinner-border spinner-border-sm\"\n          role=\"status\" aria-hidden=\"true\" v-if=\"submitLoading\"></span>送出訂單</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Modal } from 'bootstrap';\nimport swal from 'sweetalert';\n\nexport default {\n  data() {\n    return {\n      submitModal: {},\n      cartData: {},\n      submitLoading: false,\n    };\n  },\n  props: ['user', 'message'],\n  methods: {\n    openModal() {\n      this.submitModal.show();\n    },\n    closeModal() {\n      this.submitModal.hide();\n    },\n    getCartData() {\n      const url = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.cartData = res.data.data;\n          }\n        })\n        .catch((err) => {\n          console.dir(err);\n        });\n    },\n    submitOrder() {\n      this.submitLoading = true;\n      const url = `${process.env.VUE_APP_URL}api/${process.env.VUE_APP_PATH}/order`;\n      const obj = {\n        data: {\n          user: this.user,\n          message: this.message,\n        },\n      };\n      this.$http.post(url, obj)\n        .then((res) => {\n          if (res.data.success) {\n            swal('訂單送出成功！');\n            this.submitLoading = false;\n            this.$router.push('/products');\n            this.closeModal();\n          } else {\n            swal('訂單送出失敗！');\n            this.closeModal();\n          }\n        })\n        .catch((err) => {\n          console.dir(err);\n        });\n    },\n  },\n  mounted() {\n    this.submitModal = new Modal(this.$refs.submitModal, { backdrop: 'static', keyboard: false });\n    this.getCartData();\n  },\n};\n</script>\n","import { render } from \"./SubmitModal.vue?vue&type=template&id=fae69668\"\nimport script from \"./SubmitModal.vue?vue&type=script&lang=js\"\nexport * from \"./SubmitModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./CustomerForm.vue?vue&type=template&id=d473d1ce\"\nimport script from \"./CustomerForm.vue?vue&type=script&lang=js\"\nexport * from \"./CustomerForm.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n"],"sourceRoot":""}