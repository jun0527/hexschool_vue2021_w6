(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf4c3"],{"62b3":function(t,e,c){"use strict";c.r(e);var a=c("7a23"),n={key:0,class:"loading"},o=Object(a["g"])("div",{class:"loadIcon spinner-border",role:"status"},[Object(a["g"])("span",{class:"visually-hidden"},"Loading...")],-1),l={key:1,class:"cartList mb-5 mt-4"},d=Object(a["g"])("h2",{class:"text-center"},"購物車列表",-1),s={class:"d-flex justify-content-end mb-2"},i={class:"productList table table-striped table-hover"},r=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",{width:"5%",scope:"col"},"刪除"),Object(a["g"])("th",{width:"45%",scope:"col",class:"productTitle"},"品名"),Object(a["g"])("th",{width:"15%",scope:"col"},"單價"),Object(a["g"])("th",{width:"20%",scope:"col"},"數量/單位"),Object(a["g"])("th",{width:"15%",scope:"col"},"總價")])],-1),u={class:"productTitle"},b={class:"qtyArea d-flex"},O={class:"productQty"},j=Object(a["g"])("td",null,null,-1),h=Object(a["g"])("td",null,null,-1),p=Object(a["g"])("td",null,null,-1),g=Object(a["g"])("td",{class:"totalText"},"總金額",-1),f={class:"totalText"},y={class:"d-flex justify-content-center"},v={key:2,class:"noCart py-4"},C=Object(a["g"])("h2",{class:"text-center"},"購物車列表",-1),k={class:"noCartContent py-4"},M=Object(a["g"])("h3",null,"購物車內沒有商品",-1),m=Object(a["f"])("回到產品列表");function w(t,e,c,w,x,D){var A=this,$=Object(a["x"])("font-awesome-icon"),L=Object(a["x"])("router-link"),P=Object(a["x"])("deleteModal");return Object(a["s"])(),Object(a["d"])(a["a"],null,[t.getProductLoading?(Object(a["s"])(),Object(a["d"])("div",n,[o])):Object(a["e"])("",!0),0!==x.cartData.final_total?(Object(a["s"])(),Object(a["d"])("div",l,[d,Object(a["g"])("div",s,[Object(a["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e[1]||(e[1]=function(e){return D.deleteProduct("deleteAll",t.item)})},"清空購物車")]),Object(a["g"])("table",i,[r,Object(a["g"])("tbody",null,[(Object(a["s"])(!0),Object(a["d"])(a["a"],null,Object(a["w"])(x.cartData.carts,(function(t){return Object(a["s"])(),Object(a["d"])("tr",{key:t.id},[Object(a["g"])("td",null,[Object(a["g"])("button",{type:"button",class:"deleteCartOne",onClick:function(e){return D.deleteProduct("deleteOne",t)}},[Object(a["g"])($,{icon:"trash-alt"})],8,["onClick"])]),Object(a["g"])("td",u,Object(a["A"])(t.product.title),1),Object(a["g"])("td",null,Object(a["A"])(t.product.price),1),Object(a["g"])("td",null,[Object(a["g"])("div",b,[Object(a["g"])("button",{type:"button",onClick:function(e){return D.changeQty("reduce",t,t.qty)}},[Object(a["g"])($,{icon:"caret-left",class:"icon fs-5"})],8,["onClick"]),Object(a["g"])("span",O,Object(a["A"])(t.qty),1),Object(a["g"])("button",{type:"button",onClick:function(e){return D.changeQty("add",t,t.qty)}},[Object(a["g"])($,{icon:"caret-right",class:"icon fs-5"})],8,["onClick"]),Object(a["f"])(" "+Object(a["A"])(t.product.unit),1)])]),Object(a["g"])("td",null,Object(a["A"])(t.final_total),1)])})),128))]),Object(a["g"])("tfoot",null,[Object(a["g"])("tr",null,[j,h,p,g,Object(a["g"])("td",f,Object(a["A"])(x.cartData.final_total),1)])])]),Object(a["g"])("div",y,[Object(a["g"])("button",{type:"button",class:"btn btn-primary px-4 fw-bold",onClick:e[2]||(e[2]=function(t){return A.$router.push("/customerForm")})},"結帳")])])):(Object(a["s"])(),Object(a["d"])("div",v,[C,Object(a["g"])("div",k,[M,Object(a["g"])(L,{to:"/products",class:"btn btn-primary"},{default:Object(a["F"])((function(){return[m]})),_:1})])])),Object(a["g"])(P,{ref:"deleteModal",onGetCartData:D.getCartData},null,8,["onGetCartData"])],64)}c("99af");var x={class:"modal fade",ref:"deleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},D={class:"modal-dialog"},A={class:"modal-content"},$={class:"modal-header bg-dark"},L=Object(a["g"])("h5",{class:"modal-title text-white"},"刪除確認",-1),P={class:"modal-body"},_={key:0},q={key:1},S={class:"modal-footer"};function Q(t,e,c,n,o,l){return Object(a["s"])(),Object(a["d"])("div",x,[Object(a["g"])("div",D,[Object(a["g"])("div",A,[Object(a["g"])("div",$,[L,Object(a["g"])("button",{type:"button",class:"btn-close btn-close-white",onClick:e[1]||(e[1]=function(){return l.closeModal&&l.closeModal.apply(l,arguments)})})]),Object(a["g"])("div",P,["deleteOne"===o.deleteStatus?(Object(a["s"])(),Object(a["d"])("p",_,"確定要刪除購物車中"+Object(a["A"])(o.deleteCart.product.title)+"？",1)):(Object(a["s"])(),Object(a["d"])("p",q,"確定要清空購物車？"))]),Object(a["g"])("div",S,[Object(a["g"])("button",{type:"button",class:"btn btn-secondary",onClick:e[2]||(e[2]=function(){return l.closeModal&&l.closeModal.apply(l,arguments)})},"取消"),"deleteOne"===o.deleteStatus?(Object(a["s"])(),Object(a["d"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:e[3]||(e[3]=function(){return l.deleteOne&&l.deleteOne.apply(l,arguments)})},"刪除")):(Object(a["s"])(),Object(a["d"])("button",{key:1,type:"button",class:"btn btn-danger",onClick:e[4]||(e[4]=function(){return l.deleteAll&&l.deleteAll.apply(l,arguments)})},"清空購物車"))])])])],512)}var T=c("1940"),F=c.n(T),G=c("7b17"),J={data:function(){return{deleteModal:{},deleteStatus:"",deleteCart:[]}},methods:{openModal:function(){this.deleteModal.show()},closeModal:function(){this.deleteStatus="",this.deleteCart=[],this.deleteModal.hide()},deleteOne:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart/").concat(this.deleteCart.id);this.$http.delete(e).then((function(e){e.data.success?(F()("成功刪除購物車中".concat(t.deleteCart.product.title,"！")),t.$emit("getCartData"),t.closeModal()):(F()("購物車刪除失敗！"),t.closeModal())})).catch((function(t){console.dir(t)}))},deleteAll:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/carts");this.$http.delete(e).then((function(e){e.data.success?(F()("清空購物車成功！"),t.$emit("getCartData"),t.closeModal()):F()("清空購物車失敗！")})).catch((function(t){console.dir(t)}))}},mounted:function(){this.deleteModal=new G["a"](this.$refs.deleteModal,{backdrop:"static",keyboard:!1})}};J.render=Q;var I=J,z={data:function(){return{cartData:{},deleteModal:{},getCartLoading:!0}},methods:{getCartData:function(){var t=this;this.getProductLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart");this.$http.get(e).then((function(e){e.data.success&&(t.cartData=e.data.data,t.getProductLoading=!1)})).catch((function(t){console.dir(t)}))},changeQty:function(t,e,c){var a=this,n=c;if("reduce"===t){if(1===c)return void this.deleteProduct("deleteOne",e);n-=1}else n+=1;var o={data:{product_id:e.product_id,qty:n}},l="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jun0527","/cart/").concat(e.id);this.$http.put(l,o).then((function(t){t.data.success?(F()("".concat(e.product.title,"購買數量更改為").concat(n)),a.getCartData()):F()("".concat(e.product.title,"購買數量更改失敗！"))})).catch((function(t){console.dir(t)}))},deleteProduct:function(t,e){this.$refs.deleteModal.deleteCart=e,this.$refs.deleteModal.deleteStatus=t,this.$refs.deleteModal.openModal()}},components:{deleteModal:I},created:function(){this.getCartData()}};z.render=w;e["default"]=z}}]);
//# sourceMappingURL=chunk-2d0cf4c3.3c7cb25c.js.map